# 测试说明

## 邮箱登录功能测试

### 测试账号

由于目前使用的是模拟登录方式，您可以使用以下测试账号进行登录：

- 邮箱：`test@example.com`
- 密码：`123456`
- 默认用户名：`Test User` (可在个人资料中修改)

### 测试步骤

1. 启动应用后，您将看到登录界面
2. 在邮箱输入框中输入：`test@example.com`
3. 在密码输入框中输入：`123456`
4. 点击"登录"按钮
5. 成功登录后，您将**自动跳转**到主界面，并在右上角显示登录的邮箱
6. 您现在可以搜索艺术品和收藏喜欢的作品

### 功能验证点

1. **登录功能**：
   - 输入正确的测试账号可以成功登录并自动跳转到主页
   - 输入错误的账号会显示错误提示
   - 登录过程会有加载指示器显示

2. **账户菜单功能**：
   - 登录后，右上角显示用户头像（显示用户名首字母或邮箱首字母）
   - 点击头像会显示下拉菜单，包含「我的账户」和「退出登录」选项
   - 点击「我的账户」切换到账户页面
   - 点击菜单外部可以关闭菜单

3. **账户页面功能**：
   - 账户页面作为单独页面显示，占据整个屏幕
   - 顶部显示导航栏，包含返回按钮和标题
   - 个人资料区域显示大头像、用户名和邮箱
   - 信息卡片区域显示收藏数量等用户数据
   - 点击蓝色“编辑资料”按钮可以打开编辑表单
   - 点击返回按钮可以返回主页面

4. **个人资料编辑功能**：
   - 可以编辑用户名和邮箱
   - 可以选择或更换用户头像（模拟实现）
   - 点击头像区域或“选择头像”按钮可以打开头像选择菜单
   - 可以从多个预设头像中选择一个作为个人头像
   - 保存成功后会自动返回账户页面
   - 更新后的用户信息会在整个应用中更新

4. **收藏功能**：
   - 登录后可以收藏艺术品
   - 收藏的艺术品会保存到用户账户中
   - 退出登录后再重新登录，之前的收藏仍然保留

5. **退出功能**：
   - 点击菜单中的「退出登录」可以退出当前账户
   - 退出后会返回登录界面
   - 退出后无法访问主界面和个人收藏

## 调试帮助

如果登录或个人资料编辑过程中遇到问题：

1. 确保使用的是正确的测试账号（`test@example.com` / `123456`）
2. 查看控制台日志，会有详细的登录和资料更新尝试信息
3. 如果登录后未自动跳转，请检查AuthContext.tsx中的setUser函数是否被正确调用
4. 如果上传头像图片时出错：
   - 首次使用时请接受权限请求，允许应用访问相册
   - 选择图片后需要裁剪为方形，并点击底部“选择”按钮
   - 控制台会输出选择图片的详细信息，帮助调试
5. 请注意，由于这是模拟实现，邮箱修改无需重新验证，但在真实应用中这通常需要发送验证邮件
6. 如果使用模拟器测试，请确保模拟器中已安装expo-image-picker依赖包

## Firebase配置说明

目前，应用使用的是模拟登录模式，可以不需要真实的Firebase配置。如果您想使用真实的Firebase服务：

1. 注册Firebase账号并创建一个项目
2. 在`firebase.js`文件中更新配置：
   ```javascript
   const firebaseConfig = {
     apiKey: "您的API密钥",
     authDomain: "您的项目ID.firebaseapp.com",
     projectId: "您的项目ID",
     storageBucket: "您的项目ID.appspot.com",
     messagingSenderId: "您的消息发送者ID",
     appId: "您的应用ID",
     measurementId: "您的测量ID"
   };
   ```
3. 取消注释原来的`loginWithEmail`函数，并注释掉模拟登录的函数

## 注意事项

1. 在模拟模式下，所有用户数据都保存在本地，不会同步到云端
2. 只有使用指定的测试账号才能登录
3. 上传的头像使用本地URI存储，应用重启后可能无法访问
4. 在真实应用中，头像应该上传到如Firebase Storage等云存储服务
5. 切换到真实Firebase服务后，需要在Firebase控制台中启用邮箱/密码认证方式